<?xml version="1.0"?>

<launch>
    <!-- Launch file arguments -->
    <arg name="vehicle_name" default="atlascar2"/>
    <arg name="x_pos" default="30.0"/>
    <arg name="y_pos" default="30.0"/>
    <arg name="z_pos" default="0.0"/>
    <arg name="roll" default="0.0"/>
    <arg name="pitch" default="0.0"/>
    <arg name="yaw" default="0.0"/>

    <group ns="$(arg vehicle_name)">
        <param name="tf_prefix" value="$(arg vehicle_name)"/>

        <!-- robot_description is used by nodes that publish to joint_states. -->
        <param name="robot_description"
               command="$(find xacro)/xacro $(find atlascar2_description)/urdf/atlascar2_ackermann.urdf.xacro"/>

        <!-- Read joint positions from joint_states, then publish the vehicle's
             state to tf. -->
        <node name="vehicle_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher">
            <param name="publish_frequency" value="30.0"/>
        </node>

        <include file="$(find atlascar2_bringup)/launch/ackermann_spawn.launch">
            <arg name="vehicle_name" value="$(arg vehicle_name)"/>
            <arg name="x_pos" value="$(arg x_pos)"/>
            <arg name="y_pos" value="$(arg y_pos)"/>
            <arg name="z_pos" value="$(arg z_pos)"/>
            <arg name="roll" value="$(arg roll)"/>
            <arg name="pitch" value="$(arg pitch)"/>
            <arg name="yaw" value="$(arg yaw)"/>
        </include>

    </group>
</launch>